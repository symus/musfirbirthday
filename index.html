<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Musfir Birthday Countdown</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Nunito:wght@300;600;800&display=swap" rel="stylesheet">
  <style>
    :root{--bg1:#89f7fe; --bg2:#66a6ff; --accent:#00b4d8; --card:#ffffffcc;}
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;background:linear-gradient(135deg,var(--bg1),var(--bg2));font-family:'Nunito',system-ui,Arial;color:#fff;text-align:center;overflow-x:hidden}
    .countdown-card{background:var(--card);padding:22px;border-radius:16px;box-shadow:0 8px 30px rgba(0,0,0,0.15);display:inline-block;margin-top:80px;min-width:320px}
    .time{font-size:28px;font-weight:800;color:#003366}
    .btn{cursor:pointer;padding:10px 14px;border-radius:12px;border:none;font-weight:700;transition:background 0.3s,transform 0.2s}
    .btn:hover{transform:scale(1.05)}
    .btn-play{background:#00b4d8;color:white;margin-top:10px}

    .gallery{display:none;max-width:1100px;margin:28px auto;padding:16px;gap:12px;grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}
    .photo{position:relative;border-radius:12px;overflow:hidden;cursor:pointer;box-shadow:0 8px 20px rgba(0,0,0,0.12);transform-origin:center;transition:transform .18s}
    .photo:hover{transform:translateY(-6px) scale(1.02)}
    .photo img{display:block;width:100%;height:160px;object-fit:cover}
    .tooltip{position:absolute;left:8px;bottom:8px;background:linear-gradient(90deg,#00000088,#00000055);color:#fff;padding:6px 8px;border-radius:8px;font-size:13px}

    .modal-back{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;padding:20px;z-index:50}
    .modal{background:white;border-radius:12px;max-width:520px;width:100%;padding:16px;box-shadow:0 10px 40px rgba(0,0,0,0.3);text-align:center}
    .modal h3{margin-bottom:12px;color:#0077b6}

    .reveal{display:none;text-align:center;margin-top:18px}
    .reveal .message{font-family:'Pacifico',cursive;font-size:40px;color:#fff;text-shadow:0 6px 24px rgba(0,0,0,0.2)}
  </style>
</head>
<body>
  <div class="countdown-card">
    <div id="countdownMsg" style="font-weight:700;color:#004080;margin-bottom:10px;">--</div>
    <div id="timeDisplay" class="time">-- : -- : -- : --</div>
    <div style="font-size:13px;color:#004080;margin-top:4px">Days : Hours : Minutes : Seconds</div>
    <button id="musicBtn" class="btn btn-play">Play Music</button>
  </div>

  <section class="reveal" id="revealSection">
    <div class="message">Happy Birthday Musfir! ðŸŽ‚ðŸŽˆ</div>
    <p style="color:#fff;font-weight:600;margin-top:8px">We love you â€” open your gifts below!</p>
  </section>

  <section class="gallery" id="gallery">
    <div class="photo" data-index="0" title="Click to get gift"><img src="https://picsum.photos/seed/pic1/400/300"><div class="tooltip">Click to get gift</div></div>
    <div class="photo" data-index="1" title="Click to get gift"><img src="https://picsum.photos/seed/pic2/400/300"><div class="tooltip">Click to get gift</div></div>
    <div class="photo" data-index="2" title="Click to get gift"><img src="https://picsum.photos/seed/pic3/400/300"><div class="tooltip">Click to get gift</div></div>
    <div class="photo" data-index="3" title="Click to get gift"><img src="https://picsum.photos/seed/pic4/400/300"><div class="tooltip">Click to get gift</div></div>
    <div class="photo" data-index="4" title="Click to get gift"><img src="https://picsum.photos/seed/pic5/400/300"><div class="tooltip">Click to get gift</div></div>
    <div class="photo" data-index="5" title="Click to get gift"><img src="https://picsum.photos/seed/pic6/400/300"><div class="tooltip">Click to get gift</div></div>
  </section>

  <div id="modalBack" class="modal-back">
    <div class="modal"><h3 id="modalMessage">Gift message</h3><button id="okBtn" class="btn btn-play">OK</button></div>
  </div>

  <script>
    const countdownMsg = document.getElementById('countdownMsg');
    const timeDisplay = document.getElementById('timeDisplay');
    const revealSection = document.getElementById('revealSection');
    const gallery = document.getElementById('gallery');
    const musicBtn = document.getElementById('musicBtn');
    const modalBack = document.getElementById('modalBack');
    const modalMessage = document.getElementById('modalMessage');
    const okBtn = document.getElementById('okBtn');

    const giftMessages = [
      'Check your first gift under the sofa.',
      'Find your second gift in the refrigerator.',
      'Your third gift is near the TV.',
      'Look under your pillow for the fourth gift.',
      'The fifth gift is in the cupboard.',
      'Your final gift is behind the curtain.'
    ];

    // Ensure gallery is hidden initially
    gallery.style.display = 'none';

    let timerHandle = null;
    const target = Date.now() + 60000; // 1 minute countdown

    function updateTimer(){
      const now = Date.now();
      const diff = target - now;
      if(diff<=0){
        clearInterval(timerHandle);
        revealSection.style.display='block';
        gallery.style.display='grid';
        countdownMsg.textContent='';
        timeDisplay.textContent='';
        return;
      }
      const days=Math.floor(diff/(1000*60*60*24));
      const hrs=Math.floor((diff%(1000*60*60*24))/(1000*60*60));
      const mins=Math.floor((diff%(1000*60*60))/(1000*60));
      const secs=Math.floor((diff%(1000*60))/1000);
      timeDisplay.textContent=`${String(days).padStart(2,'0')} : ${String(hrs).padStart(2,'0')} : ${String(mins).padStart(2,'0')} : ${String(secs).padStart(2,'0')}`;
      countdownMsg.textContent=`${days}d ${hrs}h to go for Musfir's Birthday!`;
    }

    timerHandle = setInterval(updateTimer,1000);
    updateTimer();

    // Music setup
    let audioCtx = null;
    let isPlaying = false;

    function startMusic(){
      if(isPlaying) return;
      audioCtx = new(window.AudioContext||window.webkitAudioContext)();
      const notes=[264,264,297,264,352,330,264,264,297,264,396,352,264,264,528,440,352,330,297,466,466,440,352,396,352];
      const dur=0.32;
      let t=audioCtx.currentTime+0.1;
      notes.forEach((f,i)=>{
        const o=audioCtx.createOscillator();
        const g=audioCtx.createGain();
        o.type='sine';
        o.frequency.value=f;
        o.connect(g);
        g.connect(audioCtx.destination);
        g.gain.setValueAtTime(0,t+i*dur);
        g.gain.linearRampToValueAtTime(0.15,t+i*dur+0.01);
        g.gain.linearRampToValueAtTime(0.0001,t+i*dur+dur-0.05);
        o.start(t+i*dur);
        o.stop(t+i*dur+dur);
      });
      isPlaying = true;
      musicBtn.textContent='Stop Music';
    }

    function stopMusic(){
      if(audioCtx && audioCtx.state!=='closed'){audioCtx.close(); audioCtx=null;}
      isPlaying = false;
      musicBtn.textContent='Play Music';
    }

    musicBtn.addEventListener('click',()=>{ isPlaying ? stopMusic() : startMusic(); });

    // Gift popups
    document.querySelectorAll('.photo').forEach(photo=>{
      photo.addEventListener('click',()=>{
        const idx = Number(photo.dataset.index);
        modalMessage.textContent = giftMessages[idx];
        modalBack.style.display = 'flex';
      });
    });

    okBtn.addEventListener('click',()=>{ modalBack.style.display='none'; });
    modalBack.addEventListener('click',e=>{ if(e.target===modalBack){modalBack.style.display='none';} });
  </script>
</body>
</html>
